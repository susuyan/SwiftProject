//
//  Logger.swift
//  iOSDemo
//
//  Created by susuyan on 2017/12/26.
//  Copyright Â© 2017å¹´ Cerebral Gardens. All rights reserved.
//

import XCGLogger
import Foundation

let log: XCGLogger = {
    let log = XCGLogger.default
//    let logPath: URL = cacheDirectory.appendingPathComponent("XCGLogger_Log.txt")
    
    // By using Swift build flags, different log levels can be used in debugging versus staging/production. Go to Build settings -> Swift Compiler - Custom Flags -> Other Swift Flags and add -DDEBUG to the Debug entry.
    #if DEBUG
        log.setup(level: .verbose, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true, writeToFile: nil)
        
        if let fileDestination: FileDestination = log.destination(withIdentifier: XCGLogger.Constants.fileDestinationIdentifier) as? FileDestination {
            let ansiColorLogFormatter: ANSIColorLogFormatter = ANSIColorLogFormatter()
            ansiColorLogFormatter.colorize(level: .verbose, with: .colorIndex(number: 244), options: [.faint])
            ansiColorLogFormatter.colorize(level: .debug, with: .black)
            ansiColorLogFormatter.colorize(level: .info, with: .blue, options: [.underline])
            ansiColorLogFormatter.colorize(level: .warning, with: .red, options: [.faint])
            ansiColorLogFormatter.colorize(level: .error, with: .red, options: [.bold])
            ansiColorLogFormatter.colorize(level: .severe, with: .white, on: .red)
            fileDestination.formatters = [ansiColorLogFormatter]
        }
    #else
        log.setup(level: .severe, showThreadName: true, showLevel: true, showFileNames: true, showLineNumbers: true, writeToFile: nil)
        
        
    #endif
    let emojiLogFormatter = PrePostFixLogFormatter()
    emojiLogFormatter.apply(prefix: "ğŸ—¯ğŸ—¯ğŸ—¯ ", postfix: " ğŸ—¯ğŸ—¯ğŸ—¯", to: .verbose)
    emojiLogFormatter.apply(prefix: "ğŸ”¹ğŸ”¹ğŸ”¹ ", postfix: " ğŸ”¹ğŸ”¹ğŸ”¹", to: .debug)
    emojiLogFormatter.apply(prefix: "â„¹ï¸â„¹ï¸â„¹ï¸ ", postfix: " â„¹ï¸â„¹ï¸â„¹ï¸", to: .info)
    emojiLogFormatter.apply(prefix: "âš ï¸âš ï¸âš ï¸ ", postfix: " âš ï¸âš ï¸âš ï¸", to: .warning)
    emojiLogFormatter.apply(prefix: "â€¼ï¸â€¼ï¸â€¼ï¸ ", postfix: " â€¼ï¸â€¼ï¸â€¼ï¸", to: .error)
    emojiLogFormatter.apply(prefix: "ğŸ’£ğŸ’£ğŸ’£ ", postfix: " ğŸ’£ğŸ’£ğŸ’£", to: .severe)
    log.formatters = [emojiLogFormatter]
    

    
    return log
}()


let documentsDirectory: URL = {
    let urls = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
    return urls[urls.endIndex - 1]
}()

let cacheDirectory: URL = {
    let urls = FileManager.default.urls(for: .cachesDirectory, in: .userDomainMask)
    return urls[urls.endIndex - 1]
}()
